<?xml version="1.0" encoding="UTF-8"?>

<!-- add by freeeyes -->
<configer ProcName="DBTest" DB="mysql">
  	<TableClass database="db_test" class="CUserGrid" desc="">
		<!-- 格子内的对象ID，如果没有则是0 -->
		<Column name="gridid" dbtype="int" classtype="int" value="0" />
		<!-- 格子中的物品类型，如果没有则是0 -->
		<Column name="gridtype" dbtype="int" classtype="int" value="0" />
		<!-- 格子中的物品描述，如果没有默认值是空 -->
		<Column name="griddesc" dbtype="varchar" classtype="char" length="50" value="'\0'" />
		<!-- 格子中的物品个数，如果没有默认值是0 -->
		<Column name="gridcount" dbtype="int" classtype="int" value="0" />
	</TableClass>  
  
    <!-- 如果type是背包类型,要增对背包类提供额外的增加物品,获取物品，使用物品的接口 -->
 	<TableClass database="db_test" class="CUserGridList" needlogicclass="1" desc="">
		<!-- GridID 一般与之匹配的是UserID 默认是0-->
		<Column name="gridid" dbtype="int" classtype="int" value="" />
		<!-- 一个List对象，最多有20个格子 -->
		<Column name="usergrid" dbtype="varchar" classtype="CUserGrid" length="20" />
	</TableClass> 
  
	<!-- 如果这个对象需要内存池，需要指定classpool标签的个数，如果需要共享内存，则需要填写shmkey(为保证跨平台key必须是数字) -->
	<!-- key是pool需要用到的关键字，必须是class里面的成员，用于map对象检索 -->
	<!-- 关于isdependfunc,dependclass的说明:
		1、dependfunc定义控制内存池是否依赖的是函数
		2、dependclass定义控制内存池是否依赖是对象池对象
		3、以上两点必须有且只有一条是被定义的,另一条是空的-->
	<TableClass database="db_test" table="tb_userdata" class="CUserData" classpool="500" shmkey="1111" key="id" func="select;insert;update;delete;" isdependfunc="1" dependclass="" desc="">
		<Column name="id" dbtype="int" classtype="int" value="0" />
		<Column name="nick" dbtype="varchar" classtype="char" length="20" value="'\0'" />
		<Column name="job" dbtype="int" classtype="int" value="0" />
		<Column name="ablity" dbtype="int" classtype="int" value="0" />
		<!-- 最后更新时间，这个字段由update的时候，自动记录。-->
		<Column name="activetime" dbtype="date" classtype="int" value="0" />
		<!-- 用户身上物品格子。用于测试类之间的包含，这部分存储为json到数据库 -->
		<Column name="usergridlist" dbtype="varchar" classtype="CUserGridList" length="2"/>
	</TableClass>

	<TableExt database="db_test" table="tb_userdata" class="CUserData" >
		<!-- 扩展sql只支持查询操作,不支持其他操作 
		  selecttype为1表示查询正常的数据库记录,此时返回数据类型如 vector<CUserData>& vecObj;
		  为2数值时表示非正常数据库记录比如 count(*)或者查询指定的字段信息,此时返回数据类型如 vector < map<string, string> >& vmResultData;使用者需要对返回的字段值自己处理	
		-->
		<Sql value="select * from db_test.tb_userdata order by activetime desc limit 300;" funcname="select_tb_userdata_for_pool" selecttype="1" inputvalue="vector<CUserData>&amp; vecObj"/>
	</TableExt>
</configer>